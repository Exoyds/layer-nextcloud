# How to use it

This nextcloud server will default un on port 80.

Relate this charm with either mysql or postgresql.

Have a look at this
[nextcloud-collabora-tls bundle](https://jujucharms.com/u/erik-lonroth/nextcloud-collabora-tls/bundle/)
to deploy a full collaboration office suite with [collabora online](https://www.collaboraoffice.com/)
with letsencrypt SSL certificates.

# Example deploy
```
juju deploy cs:~erik-lonroth/nextcloud
juju deploy postgresql
juju relate postgresql:db nextcloud:postgres
juju expose nextcloud
```

# Useful configuration
Setting the fqdn is useful if you have a DNS entry. You will avoid "untrusted domain" messages
in your browser with a valid domain name here.
```
juju config nextcloud fqdn=nextcloud.example.com
```

# Adding a trusted_domain
Its useful to be able to add a trusted_domain to the nextcloud config.php.
This can be done with a juju action which is a mimic of the
["occ" command](https://docs.nextcloud.com/server/16/admin_manual/configuration_server/occ_command.html)
```
juju run-action nextcloud/0 add-trusted-domain index=4 domain="nextcloud.my.local.domain"
```
The server will now accept requests via http://nextcloud.my.local.domain

# Initial login
http://<trusted_domain>/
username: admin
password: mypassword

Yes, you should change this.

# A bundle for testing


# Nextcloud version
Nextcloud is downloaded and installed from [https://download.nextcloud.com/server/releases/]

You can change the version that gets installed by editing the '''apache.yaml'''.

The layer-apache installs the site under /var/www/nextcloud